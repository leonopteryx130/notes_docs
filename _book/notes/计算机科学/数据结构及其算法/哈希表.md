# 哈希表

### **背景知识：**
哈希算法（Hash）：又称摘要算法（Digest），它的作用是：对任意一组输入数据进行计算，得到一个固定长度的输出摘要。特点：相同的输入一定得到相同的输出；不同的输入极大概率得到不同的输出。比如MD5算法（固定输出128bits），SHA-256（固定输出256bits），SHA-512（固定输出512bits）


在一般的数据结构（如数组，链表等）里，数据的存储地址与数据的值之间不存在任何关系。比如要查找一个数组中值为100的元素，就必须遍历整个数组，一个一个去比较。**哈希表**的设计采用了函数映射的思想，将存储位置与记录的关键字（也就是数据）关联起来，这样的设计方式可以快速提取到对应的值，这要求数据与地址之间一定是可以通过某种计算方式得到（如果没有这种计算方式，那么就无法通过数据快速得到地址，得到地址的方式还是得通过一一比较，设计哈希表就没有什么意义了），存储地址的数量一般是有限的，因此计算方法需要将不同长度的输入转化为固定长度的输出，并且尽可能增加通过输出计算输入的难度。这种计算方式一般就是通过几种哈希算法完成。

哈希算法的步骤一般都非常复杂，也可以根据计算方法需求设计简易的哈希算法。举个例子：

现在有这样一组数据：
```
张一：155555555
张二：166666666
张三：177777777
```
可以用姓名每个字的首字母对应的ASCII码之和作为地址
```
address (张一) = ASCII (Z) + ASCII (Y) = 90 + 89 = 179；
address (张二) = ASCII (Z) + ASCII (E) = 90 + 69 = 159；
address (张三) = ASCII (Z) + ASCII (S) = 90 + 83 = 173；
```
如果输入张一，直接返回179的地址，这样就不需要一一遍历了。但是如果新增一组数据为张四，算出的地址也为173，这种现象就称作哈希冲突，哈希冲突只能尽可能的减少，不能完全避免，因为输入的数据是不固定长度的，但是输出的结果是固定长度的，本质上是无限的输入对应有限的输出，所以无法避免哈希冲突。不过在一些特殊的使用场景下，输入也可能是有限的，比如账号和密码的长度一般不会很长。

一些常见的设计哈希函数的方法：

**第一，直接定制法**

哈希函数为关键字到地址的线性函数。如，H (key) = a*key + b。 这里，a 和 b 是设置好的常数。

**第二，数字分析法**

假设关键字集合中的每个关键字 key 都是由 s 位数字组成（k1,k2,…,Ks），并从中提取分布均匀的若干位组成哈希地址。上面张一、张二、张三、张四的手机号信息存储，就是使用的这种方法。

**第三，平方取中法**

如果关键字的每一位都有某些数字重复出现，并且频率很高，我们就可以先求关键字的平方值，通过平方扩大差异，然后取中间几位作为最终存储地址。

**第四，折叠法**

如果关键字的位数很多，可以将关键字分割为几个等长的部分，取它们的叠加和的值（舍去进位）作为哈希地址。

**第五，除留余数法**

预先设置一个数 p，然后对关键字进行取余运算。即地址为 key mod p。
