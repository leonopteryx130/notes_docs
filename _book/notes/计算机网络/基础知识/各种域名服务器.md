## **域名服务器（也叫DNS服务器）：**
所有 DNS 服务器都属于以下四个类别之一：递归解析器、根域名服务器、TLD 域名服务器和权威性域名服务器。在典型 DNS 查找中（当没有正在进行的高速缓存时），这四个 DNS 服务器协同工作来完成将指定域的IP地址提供给客户端的任务。

## **递归解析器（也叫DNS解析器）：**
作为DNS查询过程中的第一站，通常由网络运营商（ISP）提供，在网络适配器选项中设置的DNS服务器，就是设置DNS解析器的地址。当用户DNS请求发送给递归解析器后，递归解析器将缓存从权威性域名服务器收到的信息。当一个客户端请求的域名 IP 地址是另一个客户端最近请求的 IP 地址时，解析器可绕过与域名服务器进行通信的过程，并仅从第二个客户端的缓存中为第一个客户端提供所请求的记录。

## **根域名服务器：**
全世界只有13台IPv4根域名服务器。1个为主根服务器在美国。其余12个均为辅根服务器，其中9个放置在美国，欧洲2个，位于荷兰和瑞典，亚洲1个，位于日本。当用户请求的域名在DNS解析器中找不到时候，就会给根域名服务器发送请求，跟域名服务器会解析判断顶级域名（比如.com）由谁管理，并返回顶级域名服务器的ip进入下一步

## **TLD域名服务器：**
TLD域名服务器负责维护在自己顶级域名下的所有域名服务器信息，例如，.com TLD 域名服务器包含以“.com”结尾的每个网站的信息。TLD域名服务器在收到根域名服务器的请求后，会解析出二级域名所对应的服务器并返回

## **权威性域名服务器：**
这个服务器由各个机构维护，需要备案登记，通常作为IP地址解析的最后一步。有的机构还会继续提供不同的子域名，用于访问不同的资源。

## **DNS的大致工作流程**
我们从输入一个域名到得知这个域名的IP，中间发生了什么？以 ```http://a.test.com``` 为例

1. 首先浏览器会检查缓存中有没有这个域名对应的IP地址，如果有解析过程会结束。当然这个缓存时间非常短。
2. 如果浏览器缓存中没有，本地host文件，操作系统会先检查本地host有没有此域名的映射关系，有就完成
3. 如果host文件中没有，便会向本地DNS服务器（Hinet服务器）发请求进行查询，此服务器通常是由网络服务供应商（ISP）提供，比如电信，移动。也可以由我们在网络DNS设置中自己配置，常见的配置比如有谷歌的8.8.8.8，如果要查询的域名包含在本地DNS服务器资源中或者缓存了此网址的映射关系，则完成域名解析
4. 如果Hinet服务器解析失败，Hinet服务器就会向13台根DNS服务器发出请求，根DNS服务器收到请求后会判断这个顶级域名（.com) 由谁来授权管理，返回该顶级域名服务器的ip，Hinet服务器继续向负责此顶级域名.com的服务器发请求查询，这台顶级域名服务器收到请求后如果自己无法解析，它就会找到管理.com下一级（.test)DNS服务器（Domain-Level）服务器，并返回ip给Hinet服务器，Hinet服务器继续向此Domain-Level服务器发请求查询，通常这一步会返回域名对应的ip地址。如果没有，将继续重复上面的动作，直到找到为止。