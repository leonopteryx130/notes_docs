# 进程控制块（PCB）

进程控制块（process control block）是进程上下文的一部分

<div align="center">
    <img src=./进程控制块.jpg width=60% />
</div>

它记录了操作系统所需的、用于描述进程的当前状态和控制进程的全部信息。  操作系统就是根据进程的PCB来感知进程的存在，并依此对进程进行管理和控制。 PCB是进程存在的唯一标识。系统因 PCB 而感知进程的存在，并通过 PCB 来对进程进行调度、控制、分配资源。 若进程执行结束，则通过释放 PCB 来释放进程所占有的各种资源。   

## **PCB主要包括如下4方面的信息**

1. 进程标识信息
进程标识信息用于唯一地标识一个进程，一个进程通常有两种标识符：内部标志符&外部标识符。
    - 内部标志符： 由操作系统赋予每个进程的 一个唯一的数字标识符，它通常为一个进程的序号，方便了系统使用，就是进程的PID。
    - 外部标识符： 由创建者产生，是由字母和数字组成的字符串，为用户进程访问该进程提供方便。
2. 处理机状态
处理机状态信息主要由处理机的 各个寄存器内的信息 组成。 进程运行时的许多信息 均存放在处理机的各种寄存器中 。其中程序状态字（PSW）是相当重要的，处理机根据程序状态寄存器中的PSW来控制程序的运行。     
3. 进程调度信息
PCB中还存放着一些与进程调度有关的信息。    
    - 进程状态。 标识进程的当前状态（就绪、运行、阻塞），作为进程调度的依据。
    - 进程优先级。 表示进程获得处理机的优先程度。
    - 为进程调度算法提供依据的其他信息。例如，进程等待时间、进程已经获得处理器的总时间和进程占用内存的时间等。
    - 事件。 是指进程由某一状态转变为另一状态所等待发生的事件。（比如等待I/O释放）
4. 进程控制信息  
    - 程序和数据地址。 是指组成进程的程序和数据所在内存或外存中的首地址，以便在调度该进程时能从其PCB中找到相应的程序和数据。  
    - 进程同步和通信机制。 指实现进程同步和通信时所采取的机制，如消息队列指针和信号量等，他们可以 全部或部分存在PCB中。
    - 资源清单。 列出了 进程所需的全部资源 及  已经分配给该进程的资源，但不包括CPU.
    - 链接指针。它给出了处于同一队列中的下一个PCB的首地址。