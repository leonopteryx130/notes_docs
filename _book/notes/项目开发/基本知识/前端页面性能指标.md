# 前端页面性能指标

在互联网发展初期，评价前端页面加载性能通常有两个指标FP和FCP。但是随着SPA等现代前端应用的发展，页面很多时候虽然触发了FCP，但是并不是用户所关注的内容，对用户而言，和白屏没有太大区别。

谷歌公司一直十分重视网站的用户体验，移动友好性，页面加载速度和HTTPS是Google已经使用的页面排名因素，而2020年，谷歌将Core Web Vitals新纳入的用户体验指标。其中核心的3个就是LCP、FID、CLS。

**FP**：

表示渲染出第一个像素点，注意，必须是有效的像素点，而不是任意一个dom都有效的，比如下边这个例子

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>no FP</title>
  </head>
  <body>
    <div></div>
  </body>
</html>
```
没有有效的像素点，就不会触发FP

**FCP**:
表示渲染出第一个内容，这里的“内容”可以是文本、图片、canvas。注意，dom必须是有内容的，如果渲染出的dom只有样式没有内容，那么不会触发FCP，比如下边这个例子:

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>has FP, no FCP</title>
    <style>
        div {
            width: 1px;
            height: 1px;
            background-color: red;
        }
    </style>
</head>
<body>
    <div></div>
</body>
</html>
```

可以触发FP，但是不会触发FCP

由于浏览器不一定等到所有DOM都解析完才开始渲染，也就是说在DOM节点很多的情况下，浏览器解析一部分DOM后就会开始渲染，这个时候FP就会先于DCL触发。

**LCP**：最大内容渲染时间，详细见[什么是LCP](./什么是LCP.md)

**FID**：用于度量用户第一次与页面交互的延迟时间，是用户第一次与页面交互到浏览器真正能够开始处理事件处理程序以响应该交互的时间。说简单点就是评判用户操作时延的指标。

**CLS**：是对在页面的整个生命周期中发生的每一次意外布局变化的最大布局变化得分的度量，布局变化得分越小证明你的页面越稳定。用户在操作网页或者阅读网页内容的时候，对于网页的稳定性是很敏感的，假设两个用户场景：

1. 用户在很用心的阅读网页内容，但是因为js代码或者请求数据（非用户主动操作）导致页面布局发生了改变，打乱了用户阅读顺序，是非常影响用户体验的
2. 用户在准备点击某个按钮的时候，突然页面布局发生变化导致按钮位置发生变动，用户很有可能发生错误的点击，这也非常影响用户体验